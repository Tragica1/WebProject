<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Главная страница</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/tw-elements.min.css')}}" />
    <link href="{{url_for('static', filename='css/flowbite.min.css')}}" rel="stylesheet" />
    <link href="{{url_for('static', filename='css/css.css')}}" rel="stylesheet" />
    <link href="{{url_for('static', filename='css/output.css')}}" rel="stylesheet">
</head>

<body class="w-full">
    <nav class="relative flex w-full flex-wrap items-center justify-between bg-gray-800 py-1 text-white shadow-lg "
        data-te-navbar-ref>
        <div class="flex justify-between items-center w-full px-3">
            <div>
                <div class="relative max-w-fit ml-2" data-te-dropdown-ref>
                    <a class="flex items-center text-white transition duration-200 hover:text-gray-400 focus:text-grey-400 motion-reduce:transition-none text-4xl font-bold whitespace-nowrap"
                        href="#" type="button" id="dropdownMenuButton2" data-te-dropdown-toggle-ref
                        aria-expanded="false">
                        Контракты НПЦ-800
                        <span class="ml-2 mt-1 w-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                class="h-6 w-6">
                                <path fill-rule="evenodd"
                                    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                                    clip-rule="evenodd" />
                            </svg>
                        </span>
                    </a>
                    <ul id="contractList"
                        class="absolute z-[1000] float-left m-0 hidden max-w-fit list-none overflow-hidden rounded-lg border-none bg-gray-600 bg-clip-padding text-left text-base shadow-lg [&[data-te-dropdown-show]]:block"
                        aria-labelledby="dropdownMenuButton2" data-te-dropdown-menu-ref>
                        {% for contract in contracts %}
                        <li class="flex grid-cols-2 gap-2 mx-2 rounded-lg">
                            <button id="contact_{{contract[0]}}"
                                class="text-left bg-transparent ml-2 mr-10 py-2 text-lg font-normal rounded-sm text-white hover:text-gray-400 active:no-underline "
                                data-te-dropdown-item-ref
                                onclick="getContractInfo('{{ contract[0] }}', '{{ contract[1] }}', '{{contract[2]}}', '{{contract[3]}}', '{{contract[4]}}', '{{contract[5]}}', '{{contract[7]}}', '{{contract[8]}}', true)">Контракт ({{contract[3]}})<br/>
                                № {{contract[1]}}
                            </button>
                            <button id="deleteContractButton" type="button"
                                onclick="deleteContract('{{ contract[0] }}')">
                                <svg class="w-5 h-5 mr-2 text-red-500 hover:text-red-800" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                    viewBox="0 0 22 22">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6" />
                                </svg>
                            </button>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="items-center inline-flex ml-2 mt-2">
                    <p>
                    <p id="cNumber" class="text-2xl text-white">Контракт не выбран </p>
                    <button data-popover-target="popover-description" data-popover-trigger="click"
                        data-popover-placement="bottom-end" type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6 ms-2 text-cyan-500 hover:text-cyan-800">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
                        </svg>
                        <span class="sr-only"></span>
                    </button>
                    </p>
                    <div data-popover id="popover-description" role="tooltip"
                        class="absolute z-10 invisible inline-block w-72  duration-500 rounded-lg bg-gray-500 border-gray-700">
                        <div id="info" class="p-2 space-y-1 text-lg text-white bg-gray-500 border-gray-700 rounded-lg">
                            <h3 id="cInnerNumber"></h3>
                            <h3 id="cType"></h3>
                            <div class="items-center inline-flex">
                                <span class="font-medium">Статус: </span>
                                <select id="cStatus" required onchange="changeContractStatus(this)"
                                    class="block w-full mx-2 px-2 text-white border border-gray-300 rounded-lg bg-gray-400 focus:ring-gray-700  focus:border-gray-700 ">
                                    <!-- <option value="1" selected></option> -->
                                    {% for cs in contractStatus %}
                                    <option value="{{cs[0]}}">{{cs[1]}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <h3 id="cCity"></h3>
                            <h3 id="cStart"></h3>
                            <h3 id="cEnd"></h3>
                        </div>
                        <div data-popper-arrow></div>
                    </div>
                    <button type="button" id="addContractButton" data-modal-target="contract-modal"
                        data-popover-target="popover-AddContract" data-modal-toggle="contract-modal"
                        onclick="addProductSelect()">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6 ms-2 text-green-500 hover:text-green-800">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                        </svg>
                    </button>
                    <div data-popover id="popover-AddContract" role="tooltip"
                        class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0 ">
                        <h3 class="text-sm font-semibold text-center text-white p-2">Добавить контракт</h3>
                        <div data-popper-arrow></div>
                    </div>
                    <div id="contract-modal" tabindex="-1" aria-hidden="true"
                        class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center min-w-fit md:inset-0 h-[calc(100%-1rem)] max-h-full">
                        <div class="relative p-2 w-full min-w-fit max-w-2xl min-h-fit">
                            <div class="relative bg-white rounded-lg shadow">
                                <div class="flex items-center justify-between p-2 border-b rounded-t">
                                    <h3 class="text-xl font-semibold text-black ">
                                        Добавление контракта
                                    </h3>
                                    <button type="button" id="closeContractModal"
                                        class="text-black bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                        data-modal-hide="contract-modal">
                                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                            fill="none" viewBox="0 0 14 14">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                                        </svg>
                                    </button>
                                </div>
                                <div class="p-3 space-y-2 text-lg">
                                    <div class="space-y-4">
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Номер: </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contractNumber" name="contractNumber"
                                                    class="bg-gray-50 text-lg border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5"
                                                    required>

                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Номер
                                                    заказа:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contractInnerNumber" name="contractInnerNumber"
                                                    class="bg-gray-50 text-lg border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Город: </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contractCity" name="contractCity"
                                                    class="bg-grey-50 text-lg border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Дата подписания:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="date" id="contractStartDate" name="contractStartDate"
                                                    class="bg-gray-50 text-lg border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Дата сдачи:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="date" id="contractEndDate" name="contractEndDate"
                                                    class="bg-gray-50 text-lg border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Тип контракта:
                                                </h2>
                                            </div>
                                            <div class="flex flex-wrap items-center" id="contractType">
                                                {% for contractType in contractTypes %}
                                                <input id="{{contractType[0]}}" type="radio" name="colored-radio"
                                                    class="w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600"
                                                    required>
                                                <label for="{{contractType[0]}}"
                                                    class="ms-2 text-lg font-medium text-black me-4">{{contractType[1]}}</label>
                                                {% endfor %}
                                            </div>
                                        </div>

                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Выбор изделия:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1" id="prodValid">
                                                <button id="dropdownProductsButton"
                                                    data-dropdown-toggle="dropdownProducts"
                                                    data-dropdown-placement="bottom"
                                                    class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-2 focus:ring-teal-500 focus:outline-none font-medium rounded-lg px-5 py-2.5 text-center inline-flex items-center "
                                                    type="button">Изделия <svg class="w-2.5 h-2.5 ms-3"
                                                        aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                                        fill="none" viewBox="0 0 10 6">
                                                        <path stroke="currentColor" stroke-linecap="round"
                                                            stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4" />
                                                    </svg>
                                                </button>
                                                <div id="dropdownProducts"
                                                    class="z-10 hidden bg-white divide-y divide-gray-700 rounded-lg shadow w-80 ">
                                                    <ul id="productsSelector"
                                                        class="h-72 p-3 space-y-2 overflow-y-auto text-gray-700 "
                                                        aria-labelledby="dropdownProductsButton">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b ">
                                    <button type="submit" onclick="saveContract()" id="saveContract"
                                        class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-2 focus:outline-none focus:ring-teal-500 font-medium rounded-lg text-xl px-5 py-2.5 text-center ">
                                        Сохранить</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a data-popover-target="popover-ContractStat" class="cursor-pointer" href="/statistic">
                        <svg class="w-6 h-6 ms-2 text-orange-500 hover:text-orange-800" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="1.5" d="M10 6a7.5 7.5 0 1 0 8 8h-8V6Z" />
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="1.5" d="M13.5 3H13v8h8v-.5A7.5 7.5 0 0 0 13.5 3Z" />
                        </svg>
                    </a>
                    <div data-popover id="popover-ContractStat" role="tooltip"
                        class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0">
                        <h3 class="text-sm font-semibold text-center text-white p-2">Статистика</h3>
                        <div data-popper-arrow></div>
                    </div>
                    <button data-popover-target="popover-settings" data-popover-trigger="click"
                        data-popover-placement="bottom-end" type="button">
                        <svg class="w-6 h-6 ms-2 text-blue-500 hover:text-blue-800" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                                d="M20 6H10m0 0a2 2 0 1 0-4 0m4 0a2 2 0 1 1-4 0m0 0H4m16 6h-2m0 0a2 2 0 1 0-4 0m4 0a2 2 0 1 1-4 0m0 0H4m16 6H10m0 0a2 2 0 1 0-4 0m4 0a2 2 0 1 1-4 0m0 0H4" />
                        </svg>
                        <span class="sr-only"></span>
                    </button>
                    <div data-popover id="popover-settings" role="tooltip"
                        class="absolute z-10 invisible inline-flex w-64 p-2 duration-500 rounded-lg bg-gray-500 border-gray-700">
                        <div id="settings" class="p-1 text-sm text-white  bg-gray-500 border-gray-700 rounded-lg">
                            <div class="flex gap-6  items-center" style="display: none;">
                                <div class="py-2">
                                    <h2 class="text-left font-medium text-white">Использовать подсветку выбранных
                                        элементов?</h2>
                                </div>
                                <div>
                                    <input id="setting1" type="checkbox" value="" name="bordered-checkbox"
                                        oninput="changeSettings(this)"
                                        class="w-5 h-5 text-teal-600 bg-gray-300 border-gray-400 rounded focus:ring-teal-500">
                                </div>
                            </div>
                            <div class="flex gap-6 items-center">
                                <div class=" py-2">
                                    <h2 class="text-left font-medium text-white">Использовать подсветку статусов?</h2>
                                </div>
                                <div>
                                    <input id="setting2" type="checkbox" value="" name="bordered-checkbox"
                                        oninput="changeSettings(this)"
                                        class="w-5 h-5 text-teal-600 bg-gray-300 border-gray-400 rounded focus:ring-teal-500">
                                </div>
                            </div>
                        </div>
                        <div data-popper-arrow></div>
                    </div>
                </div>
            </div>

            <div>
                {% if cur_user %}
                <button onclick="logoutUser()" id="currentUser"
                    class="text-2xl pr-10 text-white hover:underline">{{cur_user.username}}</button>
                <h3 id="userRoles" class="text-white">Роли:
                    {%for role in cur_user.roles%}
                    <span id="role{{role[0]}}">{{role[1]}}</span>
                    {%endfor%}
                </h3>
                {% else %}
                <a href="/login" class="text-2xl text-white  hover:underline">Вход</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="flex justify-between items-start content-around space-x-3 mx-2 pt-2">
        <div class="w-4/6">
            <h2 class="mb-1 text-2xl font-semibold text-black">Список изделий: </h2>
            <div id="mainTree">
            </div>
            <a data-te-collapse-init href="#collapseThree" role="button" aria-expanded="false"
                aria-controls="collapseThree">
            </a>
        </div>
        <div id="currentDetal" class="w-2/6 ">
            <h2 class="mb-1 text-2xl font-semibold text-black">Деталь: </h2>
            <div id="currentProduct"  class="border h-custom overflow-y-auto border-teal-800 rounded-lg shadow-xl text-sm shadow-teal-400 md:p-8">
                <div class="grid grid-cols-3">
                    <div class="flex col-span-2 gap-3 text-center items-center">
                        <h6 class="font-medium text-sm text-black">Режим редактирования базы данных:</h6>
                        <label class="cursor-pointer mb-1" onclick="changeInDB()">
                            <input id="changeInDB" type="checkbox" value="" class="sr-only peer" disabled
                                data-modal-target="product-changeDB-modal" data-modal-toggle="product-changeDB-modal">
                            <div
                                class="mt-1 relative w-10 h-5 bg-gray-200 hover:ring-gray-800 ring-2 ring-gray-600 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all border-gray-700 peer-checked:bg-red-700">
                            </div>
                        </label>
                    </div>
                    <div class="flex justify-end">
                        <button id="dropdownProductsParents" data-dropdown-toggle="dropdownParents" disabled
                            data-dropdown-placement="left" data-popover-target="popover-Parents"
                            data-dropdown-placement="bottom" onclick="getProductParents()" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22" stroke-width="1.5"
                                stroke="currentColor" class="w-5 h-5 ms-2 text-cyan-500 hover:text-cyan-800">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
                            </svg>
                            <span class=" sr-only"></span>
                        </button>
                        <div data-popover id="popover-Parents" role="tooltip"
                            class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0 ">
                            <h3 class="text-sm font-semibold text-center text-white p-2">Куда входит?</h3>
                            <div data-popper-arrow></div>
                        </div>
                        <div id="dropdownParents"
                            class="hidden bg-white divide-y divide-gray-900 rounded-lg shadow w-72">
                            <ul id="parentsSelector"
                                class="h-20 p-2 space-y-3 text-sm overflow-y-auto text-black border border-black rounded-lg"
                                aria-labelledby="dropdownProductsParents">
                            </ul>
                        </div>
                        <button id="addButton" onclick="setDeafults()" type="button"
                            data-popover-target="popover-addButton" data-modal-target="product-add-modal"
                            data-modal-toggle="product-add-modal">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22" stroke-width="1.5"
                                stroke="currentColor" class="w-5 h-5 text-left text-green-500 hover:text-green-800">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                        </button>
                        <div data-popover id="popover-addButton" role="tooltip"
                            class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0 ">
                            <h3 class="text-sm font-semibold text-center text-white p-2">Добавить изделие</h3>
                            <div data-popper-arrow></div>
                        </div>
                        <button id="deleteButton" type="button" data-popover-target="popover-deleteButton" disabled
                            data-modal-target="product-delete-modal" data-modal-toggle="product-delete-modal">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22" stroke-width="1.5"
                                stroke="currentColor" class="w-5 h-5 text-left text-red-500 hover:text-red-800">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="m15 9-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                        </button>
                        <div data-popover id="popover-deleteButton" role="tooltip"
                            class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0 ">
                            <h3 class="text-sm font-semibold text-center text-white p-2">Удалить изделие</h3>
                            <div data-popper-arrow></div>
                        </div>
                    </div>
                </div>
                <hr id="dbID" class="mt-1 mx-auto h-px bg-black border-teal-800 border-2">
                <div id="product-change-modal" class=" space-y-1 text-sm">
                    <div id="hideen5" class="pt-2 space-y-1 text-sm">
                        <h5 id="productName" class="font-medium text-black">Изделие: </h5>
                        <h5 id="productCode" class="font-medium text-black">Обозначение: </h5>
                        <hr class="mt-1 mx-auto h-px bg-black border-teal-800 border-2">
                    </div>
                    <div id="hideen6" class="pt-2 space-y-1 text-sm">
                        <div class="grid grid-cols-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Изделие: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="text" id="productNameforDB"
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                        <div class="grid grid-cols-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Обозначение: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="text" id="productCodeforDB"
                                    class="bg-gray-50 text-lg border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black ">Тип: </h2>
                        </div>
                        <div class="grid grid-rows-1">
                            <select id="productType"
                                class="bg-green-500 hover:bg-green-800 text-sm border border-black text-white focus:ring-0 rounded-md block min-w-full p-2.5">
                                <option value="" selected disabled hidden></option>
                                {% for type in types %}
                                {%if type[0] == 1%}
                                <option value="{{type[0]}}" selected>{{type[1]}}</option>
                                {%else%}
                                <option value="{{type[0]}}">{{type[1]}}</option>
                                {%endif%}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black ">Состояние: </h2>
                        </div>
                        <div class="grid grid-rows-1">
                            <select id="productState"
                                class="bg-blue-500 hover:bg-blue-800 text-sm border border-black text-white focus:ring-0 rounded-md block min-w-full p-2.5">
                                <option value="" selected disabled hidden></option>
                                {% for state in states %}
                                {%if state[0] == 1%}
                                <option value="{{state[0]}}" selected>{{state[1]}}</option>
                                {%else%}
                                <option value="{{state[0]}}">{{state[1]}}</option>
                                {%endif%}

                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black">Зав. номер: </h2>
                        </div>
                        <div class="grid grid-rows-1">
                            <input type="text" id="productNumber" value="б/н"
                                class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                        </div>
                    </div>
                    <div class="grid grid-cols-2">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black">Кол-во: </h2>
                        </div>
                        <div class="grid grid-rows-1">
                            <input type="number" id="productCount" value="1"
                                class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                        </div>
                    </div>
                    <div class="grid grid-cols-2">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black">Покупное изделие:</h2>
                        </div>
                        <div class="grid grid-rows-1 pt-3 text-center">
                            <input id="isLocalContract" type="checkbox" value="" name="bordered-checkbox"
                                class="w-5 h-5 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500">
                        </div>
                    </div>
                    <div id="hideen1">
                        <div class="grid grid-cols-2 py-2 items-baseline ">
                            <div class="inline-flex grid-rows-1 py-2">
                                <div class="flex grid-cols-2 gap-4 py-2">
                                    <button type="button" data-modal-target="company-modal"
                                        data-popover-target="popover-editProvider" data-modal-toggle="company-modal">
                                        <svg class="w-5 h-5 text-blue-500 hover:text-blue-800" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                                            <path fill-rule="evenodd"
                                                d="M14 4.182A4.136 4.136 0 0 1 16.9 3c1.087 0 2.13.425 2.899 1.182A4.01 4.01 0 0 1 21 7.037c0 1.068-.43 2.092-1.194 2.849L18.5 11.214l-5.8-5.71 1.287-1.31.012-.012Zm-2.717 2.763L6.186 12.13l2.175 2.141 5.063-5.218-2.141-2.108Zm-6.25 6.886-1.98 5.849a.992.992 0 0 0 .245 1.026 1.03 1.03 0 0 0 1.043.242L10.282 19l-5.25-5.168Zm6.954 4.01 5.096-5.186-2.218-2.183-5.063 5.218 2.185 2.15Z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                    <div data-popover id="popover-editProvider" role="tooltip"
                                        class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0 ">
                                        <h3 class="text-sm font-semibold text-center text-white p-2">Редактировать
                                            поставщиков
                                        </h3>
                                        <div data-popper-arrow></div>
                                    </div>
                                    <h2 class="text-left font-medium text-black">Поставщик:</h2>
                                </div>
                            </div>
                            <div class="grid grid-rows-1">
                                <div data-popover-target="popover-description-provider-1" data-popover-placement="left"
                                    type="button">
                                    <select id="productProvider" onchange="showContacts(this)"
                                        class="bg-violet-500 hover:bg-violet-800 text-sm border border-black text-white focus:ring-0 rounded-md block w-full p-2.5">
                                    </select>
                                </div>
                                <div data-popover id="popover-description-provider-1" role="tooltip"
                                    class="flex absolute z-10 invisible text-sm text-white transition-opacity duration-300 bg-gray-500 border border-gray-700 rounded-lg shadow-sm opacity-0 max-w-max w-auto">
                                    <div class="p-2 space-y-2">
                                        <div class="flex space-x-2">
                                            <div class="text-left">
                                                <h2 class="text-left font-medium text-white">Адрес: </h2>
                                            </div>
                                            <div class="">
                                                <p id="providerAddress" class="text-left font-medium"></p>
                                            </div>
                                        </div>
                                        <hr class="mx-auto my-1 h-px bg-gray-700 border-gray-700 border">
                                        <div id="contacts">

                                        </div>
                                    </div>
                                    <div data-popper-arrow></div>
                                </div>

                            </div>
                        </div>
                        <div class="grid grid-cols-2 py-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-gray-900 ">Подписание:
                                </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="date" id="startDate"
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 py-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Исполнение:
                                </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="date" id="endDate"
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black">Примечание:</h2>
                        </div>
                        <div class="grid grid-rows-1">
                            <textarea id="productNote" rows="4"
                                class="block p-2.5 w-full text-sm text-black bg-gray-50 rounded-lg border border-gray-300 focus:ring-teal-500 focus:border-teal-500"></textarea>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 ">
                        <div class="grid grid-rows-1 py-2 text-center">
                            <h2 class="text-left font-medium text-black">Файлы:</h2>
                        </div>
                        <div class="grid grid-rows-1">
                            <div class="flex items-center justify-center w-full">
                                <label for="productFile"
                                    class="flex flex-col items-center justify-center max-w-full w-full h-26 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-300">
                                    <div id="productFilesList"
                                        class="flex flex-col items-center justify-center pt-5 pb-6">
                                        <svg class="w-8 h-8 mb-4 text-gray-500 " aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
                                        </svg>
                                        <p class="mb-2 text-sm text-gray-500"><span
                                                class="font-semibold text-center items-center">Нажмите чтобы
                                                загрузить файл.</span></p>
                                    </div>
                                    <input id="productFile" oninput="showFileList('productFile', 'productFilesList')"
                                        type="file" class="hidden" multiple />
                                </label>
                                <!-- <a id="linkForSavingFiles" style="display:none"></a> -->
                            </div>
                        </div>
                    </div>
                    <div class="flex-col  items-center">
                        <div class="py-2 text-left">
                            <h2 class="text-left font-medium text-black">Доступные файлы: </h2>
                            <div id="fileList" class="pt-2 overflow-hidden grid grid-rows-1"> Файлы не найдены
                            </div>
                        </div>

                    </div>
                    <div id="changeButton" class="grid grid-cols-2 py-1">
                        <div class="grid grid-rows-1 gap-0 py-2 text-center">
                            <button id="chButton" data-modal-hide="company-modal" type="button"
                                onclick="changeProduct()"
                                class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-2 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-lg px-2 py-2 text-center">
                                Сохранить</button>

                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!-- Добавление поставщика -->
        <div id="company-modal" data-modal-backdrop="static" tabindex="-1" aria-hidden="true"
            class="box-border hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center md:inset-0">
            <div class="relative w-auto min-h-max">
                <div class="relative bg-white rounded-lg shadow">
                    <div class="flex items-center justify-between p-4 border-b rounded-t">
                        <h3 class="text-xl font-semibold text-black ">
                            Редактирование поставщиков
                        </h3>
                        <button type="button"
                            class="text-black bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                            data-modal-hide="company-modal">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                            </svg>
                        </button>
                    </div>
                    <div class="flex">
                        <div class="w-1/3 border-r py-2 px-2">
                            <div class="flex space-x-2 items-center">
                                <h3 class="text-lg font-semibold  text-black ">
                                    Список поставщиков:
                                </h3>
                                <button type="button" id="addNewProvider" onclick="addNewProvider()">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22"
                                        stroke-width="1.5" stroke="currentColor"
                                        class="w-4 h-4 ms-2 text-green-500 hover:text-green-800">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg>
                                </button>

                            </div>
                            <ul id="providersList" overflow-hidden
                                class="h-72 p-3 block space-y-2 border rounded-lg border-gray-700 overflow-y-auto text-gray-700 "
                                aria-labelledby="dropdownProductsButton">
                            </ul>
                        </div>
                        <div class="w-2/3 ">
                            <div class="h-5/6 min-h-fit contents">
                                <div id="currentProvider" class="p-4 space-y-2 text-sm border-b">
                                    <div class="grid grid-cols-2 gap-1">
                                        <div class="grid grid-rows-1 py-2 text-center">
                                            <h2 class="text-left font-medium text-black">Название:
                                            </h2>
                                        </div>
                                        <div class="grid grid-rows-1">
                                            <!--  -->
                                            <input type="text" id="companyName" oninput="updateCurrentProvider()"
                                                class="bg-gray-50  border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-1">
                                        <div class="grid grid-rows-1 py-2 text-center">
                                            <h2 class="text-left font-medium text-black">Адрес:
                                            </h2>
                                        </div>
                                        <div class="grid grid-rows-1">
                                            <input type="text" id="companyAddress"
                                                class="bg-gray-50  border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                        </div>
                                    </div>
                                </div>
                                <div class="flex max-h-min">
                                    <div class="w-2/5 border-r">
                                        <div class="py-2 px-4">
                                            <div class="flex space-x-2 items-center">
                                                <h3 class="text-sm font-semibold  text-black ">
                                                    Список контактов:
                                                </h3>
                                                <button type="button" id="addNewContact" onclick="addNewContact()">
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                                                        viewBox="0 0 22 22" stroke-width="1.5" stroke="currentColor"
                                                        class="w-4 h-4 ms-2 text-green-500 hover:text-green-800">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                                    </svg>
                                                </button>
                                            </div>

                                            <ul id="providerContactsList" overflow-hidden
                                                class="max-h-32 min-w-56 max-w-52 min-h-20  p-3 space-y-3 border rounded-lg border-gray-700 overflow-y-auto text-gray-700 "
                                                aria-labelledby="dropdownProductsButton">
                                            </ul>
                                        </div>
                                    </div>
                                    <div id="currentContact" class="w-3/5 p-4 space-y-2 text-sm">
                                        <div class="grid grid-cols-2 gap-1 text-sm">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">ФИО:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contactName" value=""
                                                    oninput="updateCurrentContact()"
                                                    class="bg-gray-50  border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-1">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Должность:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contactPost" value=""
                                                    oninput="updateCurrentContact()"
                                                    class="bg-gray-50  border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-1">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Телефон:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contactPhone" value=""
                                                    oninput="updateCurrentContact()"
                                                    class="bg-gray-50  border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-1">
                                            <div class="grid grid-rows-1 py-2 text-center">
                                                <h2 class="text-left font-medium text-black">Почта:
                                                </h2>
                                            </div>
                                            <div class="grid grid-rows-1">
                                                <input type="text" id="contactEmail" value=""
                                                    oninput="updateCurrentContact()"
                                                    class="bg-gray-50  border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="flex grid-cols-2 gap-1">
                                    <h2 class="text-left font-medium text-black">Добавить
                                        контакт: </h2>
                                    <button type="button" onclick="addContactBlock()">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22"
                                            stroke-width="1.5" stroke="currentColor"
                                            class="w-5 h-5 ms-2 text-green-500 hover:text-green-800">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                        </svg>
                                    </button>
                                </div>
                                <div id="companyContacts" class="grid grid-cols-1 gap-4">
                                </div> -->
                            </div>
                            <div class="h-1/6 p-3 border-t border-gray-200 rounded-b ">
                                <button type="button" id="providerEditSave" onclick="changeProvider()"
                                    class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-2 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-lg px-5 py-2 text-center ">
                                    Сохранить</button>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
        <!-- Удаление изделия -->
        <div id="product-delete-modal" tabindex="-1"
            class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-md max-h-full">
                <div class="relative bg-white rounded-lg shadow">
                    <button type="button"
                        class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                        data-modal-hide="product-delete-modal">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                        </svg>
                        <span class="sr-only">Закрыть окно</span>
                    </button>
                    <div class="p-4 md:p-5 text-center">
                        <svg class="mx-auto mb-4 text-gray-400 w-12 h-12" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                        </svg>
                        <h3 id="productToDelete" class="mb-5 text-lg font-normal text-gray-500">Вы действительно
                            хотите удалить изделие </h3>
                        <button onclick="deleteProduct()" type="button" data-modal-hide="product-delete-modal"
                            class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center">
                            Да
                        </button>
                        <button data-modal-hide="product-delete-modal" type="button"
                            class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-10">Нет</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Изменение в БД -->
        <div id="product-changeDB-modal" tabindex="-1"
            class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-md max-h-full">
                <div class="relative bg-white rounded-lg shadow">
                    <button type="button"
                        class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                        data-modal-hide="product-changeDB-modal">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                        </svg>
                        <span class="sr-only">Закрыть окно</span>
                    </button>
                    <div class="p-4 md:p-5 text-center">
                        <svg class="mx-auto mb-4 text-gray-400 w-12 h-12" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                        </svg>
                        <h3 class=" text-lg font-normal text-gray-500"> Изменение изделий в этом режиме приведёт к
                            изменению базы данных.</h3>
                        <h3 class="mb-5 text-lg font-semibold text-gray-500"> Вы уверены что хотите этого?</h3>
                        <button type="button" onclick="checkAnswer(1)" data-modal-hide="product-changeDB-modal"
                            class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center">
                            Да
                        </button>
                        <button id="close-changeDB-modal" data-modal-hide="product-changeDB-modal" type="button"
                            onclick="checkAnswer(0)"
                            class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-10">
                            Нет</button>

                    </div>
                </div>
            </div>
        </div>
        <audio id="sound">
            <source src="./static/sounds/doom.mp3" type="audio/mp3">
        </audio>
        <!-- Добавление изделия  -->
        <div id="product-add-modal" data-modal-backdrop="static" tabindex="-1" aria-hidden="true"
            class="hidden   overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-2rem)] max-h-full">
            <div class="relative px-2 w-full max-w-2xl  ">
                <div class="p-1 relative overflow-y-auto h-custom-2 bg-white rounded-lg shadow">
                    <div class="border-b rounded-t">
                        <div class="flex items-center justify-between">
                            <h4 class="text-lg font-semibold text-black ">
                                Добавление изделия в:
                            </h4>
                            <div class="float-right inline-flex items-center">
                                <label class="cursor-pointer" data-popover-target="popover-addInDB">
                                    <input id="addInDB" type="checkbox" value="" class="sr-only peer"
                                        onclick="saveInDB()">
                                    <div
                                        class="relative w-11 h-6 bg-gray-200 hover:ring-teal-800 ring-2 ring-gray-600 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all border-gray-700 peer-checked:bg-teal-700">
                                    </div>
                                </label>
                                <div data-popover id="popover-addInDB" role="tooltip"
                                    class="absolute z-10 invisible inline-block w-auto text-sm  transition-opacity duration-300 bg-gray-500 border border-gray-500 rounded-lg shadow-sm opacity-0 ">
                                    <h3 class="text-sm font-semibold text-center text-white p-2">Добавить
                                        изделие в шаблон</h3>
                                    <div data-popper-arrow></div>
                                </div>
                                <button type="button" id="closeProductModal"
                                    class="text-black bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                    data-modal-hide="product-add-modal">
                                    <svg class="w-3 h-3 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 14 14">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div id="addDiv1">
                            <h4 id="mainProduct" class="text-lg text-black ">
                            </h4>
                        </div>
                    </div>
                    <div id="addDiv2" class="p-2 border-b rounded-t">
                        <div class="flex text-left justify-between">
                            <h5 class="text-sm text-left font-semibold text-black ">
                                Список существующих изделий:
                            </h5>
                            <div id="autocompleteDiv" class="relative inline-block w-full">
                                <input type="text" id="productInput"
                                    class="overflow-hidden max-h-48 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full ps-2 p-2.5  "
                                    placeholder="Поиск по изделиям..." required />
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Название: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="text" id="newProductName" required
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Обозначение: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="text" id="newProductCode" required
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Тип: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <select id="newProductType" required
                                    class="bg-green-500 hover:bg-green-800 text-sm border border-black text-white focus:ring-0 rounded-md block w-full p-2.5">
                                    <!-- <option value="1" selected></option> -->
                                    {% for type in types %}
                                    <option value="{{type[0]}}">{{type[1]}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Статус: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <select id="newProductState"
                                    class="bg-blue-500 hover:bg-blue-800 text-sm border border-black text-white focus:ring-0 rounded-md block w-full p-2.5">
                                    <!-- <option value="1" selected></option> -->
                                    {% for state in states %}
                                    <option value="{{state[0]}}">{{state[1]}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Зав. номер: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="text" id="newProductNumber"
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Кол-во: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <input type="number" id="newProductCount"
                                    class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>
                    <div id="hideen3" class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Головное изделие: </h2>
                            </div>
                            <div class="grid grid-rows-1 items-center">
                                <input id="newProductIsMain" type="checkbox" value="" name="bordered-checkbox"
                                    class="w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500">
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Покупное изделие: </h2>
                            </div>
                            <div class="grid grid-rows-1 items-center">
                                <input id="newProductisLocalContract" type="checkbox" value="" name="bordered-checkbox"
                                    class="w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500">
                            </div>
                        </div>
                    </div>
                    <div id="hideen2">
                        <div class="px-2 py-1 space-y-3 text-sm">
                            <div class="grid grid-cols-2 gap-2">
                                <div class="grid grid-rows-1 py-2 text-center">
                                    <h2 class="text-left font-medium text-black">Поставщик: </h2>
                                </div>
                                <div class="grid grid-rows-1">
                                    <select id="newProductProvider"
                                        class="bg-violet-500 hover:bg-violet-800 text-sm border border-black text-white focus:ring-0 rounded-md block w-full p-2.5">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="px-2 py-1 space-y-3 text-sm">
                            <div class="grid grid-cols-2 gap-2">
                                <div class="grid grid-rows-1 py-2 text-center">
                                    <h2 class="text-left font-medium text-black">Подписание: </h2>
                                </div>
                                <div class="grid grid-rows-1">
                                    <input type="date" id="newProductStartDate"
                                        class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                </div>
                            </div>
                        </div>
                        <div class="px-2 py-1 space-y-3 text-sm">
                            <div class="grid grid-cols-2 gap-2">
                                <div class="grid grid-rows-1 py-2 text-center">
                                    <h2 class="text-left font-medium text-black">Исполнение: </h2>
                                </div>
                                <div class="grid grid-rows-1">
                                    <input type="date" id="newProductEndDate"
                                        class="bg-gray-50 text-sm border border-gray-300 text-black rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Примечание: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <textarea id="newProductNote" rows="4"
                                    class="block p-2.5 w-full text-sm text-black bg-gray-50 rounded-lg border border-gray-300 focus:ring-teal-500 focus:border-teal-500"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Файлы: </h2>
                            </div>
                            <div class="grid grid-rows-1">
                                <div class="flex items-center justify-center w-full">
                                    <label for="newProductFiles"
                                        class="flex flex-col items-center justify-center w-full h-26 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-300">
                                        <div id="newProductFilesList"
                                            class="flex flex-col items-center justify-center pt-5 pb-6">
                                            <svg class="w-8 h-8 mb-4 text-gray-500 " aria-hidden="true"
                                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                                                <path stroke="currentColor" stroke-linecap="round"
                                                    stroke-linejoin="round" stroke-width="2"
                                                    d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
                                            </svg>
                                            <p class="mb-2 text-sm text-gray-500 "><span class="font-semibold">Нажмите
                                                    чтобы загрузить файл.</span></p>
                                        </div>
                                        <!-- oninput="showFileList('newProductFiles', 'newProductFilesList')" -->
                                        <input id="newProductFiles"
                                            oninput="showFileList('newProductFiles', 'newProductFilesList')" type="file"
                                            class="hidden" multiple />
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="px-2 py-1 space-y-3 text-sm">
                        <div class="grid grid-cols-2 gap-2 items-center">
                            <div class="grid grid-rows-1 py-2 text-center">
                                <h2 class="text-left font-medium text-black">Доступные файлы: </h2>
                            </div>
                            <div id="newFileList" class="relative grid grid-rows-1"> Файлы не найдены
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-2 border-t border-gray-200 rounded-b ">
                        <button type="button" onclick="addNewProduct()"
                            class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-2 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-lg px-5 py-2.5 text-center ">
                            Сохранить</button>

                        <div id="hideen4" class="float-right inline-flex items-center">
                            <h2 class="text-left font-medium pr-2 text-black">Дабавить входящие в состав
                                изделия?
                            </h2>
                            <input id="addProductChildren" type="checkbox" value="" name="bordered-checkbox"
                                class="w-5 h-5 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="./static/js/jquery-3.3.1.slim.min.js"></script>
    <script src="./static/js/inputmask.js"></script>
    <script src="./static/js/jquery-3.5.1.slim.min.js"></script>
    <script src="./static/js/jquery-3.6.4.min.js"></script>
    <script src="./static/js/main.js"></script>
    <script src="./static/js/login.js"></script>
    <script src="./static/js/tw-elements.umd.min.js"></script>

    <script src="./static/js/flowbite.min.js"></script>




    <script>
        $(document).ready(function () {
            var $sticky = $('#currentDetal'); // выбираем элемент div с классом 'sticky'
            var originalTop = $sticky.offset().top; // запоминаем начальное положение элемента

            $(window).scroll(function () {
                var windowTop = $(window).scrollTop(); // получаем текущую позицию прокрутки окна

                if (windowTop > originalTop) {
                    $sticky.css({ 'position': 'sticky', 'top': '0' }); // делаем элемент 'sticky' фиксированным и устанавливаем его верхнюю границу на 0
                } else {
                    $sticky.css({ 'position': 'static', 'top': '' }); // возвращаем элемент в исходное положение
                }
            });
        });
    </script>
</body>

</html>